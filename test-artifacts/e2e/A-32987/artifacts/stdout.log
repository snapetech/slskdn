/home/keith/Documents/code/slskdn/src/slskd/slskd.csproj : warning NU1903: Package 'Microsoft.Build.Utilities.Core' 17.8.3 has a known high severity vulnerability, https://github.com/advisories/GHSA-w3q9-fxm7-j8fq
/home/keith/Documents/code/slskdn/src/slskd/slskd.csproj : warning NU1903: Package 'Microsoft.Build.Utilities.Core' 17.8.3 has a known high severity vulnerability, https://github.com/advisories/GHSA-w3q9-fxm7-j8fq
[Config] Loading configuration from "/home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/config/slskd.yml"
[Config] Configuration providers added, YAML file: "/home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/config/slskd.yml"
[Config] After binding OptionsAtStartup.Security.Enabled = True, Profile = "Standard"
[Config] Raw config sections - security.Exists=False, slskd:security.Exists=True
[Config] Raw slskd:security section enabled value: "True"


                   ▄▄▄▄         ▄▄▄▄       ▄▄▄▄
           ▄▄▄▄▄▄▄ █  █ ▄▄▄▄▄▄▄ █  █▄▄▄ ▄▄▄█  █
           █__ --█ █  █ █__ --█ █    ◄█ █  -  █
           █▄▄▄▄▄█ █▄▄█ █▄▄▄▄▄█ █▄▄█▄▄█ █▄▄▄▄▄█
╒════════════════════════════════════════════════════════╕
│           GNU AFFERO GENERAL PUBLIC LICENSE            │
│                   https://slskd.org                    │
│                                                        │
│                     0.0.0 (0.0.0)                      │
│■■■■■■■■■■■■■■■■■■■■► DEVELOPMENT ◄■■■■■■■■■■■■■■■■■■■■■│
└────────────────────────────────────────────────────────┘
[20:56:38 INF] Version: 0.0.0 (0.0.0)
[20:56:38 WRN] This is a Development build; YMMV
[20:56:38 INF] System: .NET 8.0.22, Unix 6.12.67.1, 64 bit, 32 processors
[20:56:38 INF] Process ID: 756339 (64 bit)
[20:56:38 INF] Invocation ID: 55dcfab7-e75f-4388-983c-481b15b22cfe
[20:56:38 INF] Instance Name: default
[20:56:38 INF] Configuring application...
[20:56:38 INF] Using application directory /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987
[20:56:38 INF] Using configuration file /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/config/slskd.yml
[20:56:38 INF] Storing application data in /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/data
[20:56:38 INF] [Config] Loading configuration from /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/config/slskd.yml
[20:56:38 INF] [Config] Configuration providers added, YAML file: /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/config/slskd.yml
[20:56:38 INF] [MAIN] About to configure ASP.NET services...
[20:56:38 INF] [ASP] Starting ConfigureAspDotNetServices...
[20:56:38 INF] [DI] Starting ConfigureDependencyInjectionContainer...
[20:56:39 INF] [DI] SLSKDN_E2E_SKIP_BRIDGE_PROXY=1; skipping BridgeProxyServer
[20:56:39 INF] Pod database created at /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/pods.db - ensure file permissions are secure (chmod 600)
[20:56:39 INF] [DI] Configuring Realm services...
[20:56:39 INF] [DI] Configuring Social Federation services...
[20:56:39 INF] [DI] Configuring Governance and Gossip services...
[20:56:39 INF] [DI] Configuring MeshCore services...
[20:56:39 INF] [DI] About to call AddSlskdnSecurity...
[20:56:39 INF] [AddSlskdnSecurity] STEP 1: Checking configuration sections...
[20:56:39 INF] [AddSlskdnSecurity] STEP 1a: slskd:security.Exists() = True, enabled = True
[20:56:39 INF] [AddSlskdnSecurity] STEP 1b: Security.Exists() = False, enabled = N/A
[20:56:39 INF] [AddSlskdnSecurity] STEP 1c: security.Exists() = False, enabled = N/A
[20:56:39 INF] [AddSlskdnSecurity] STEP 2: Using slskd:security section
[20:56:39 INF] [AddSlskdnSecurity] STEP 3: Configuring SecurityOptions from section...
[20:56:39 INF] [AddSlskdnSecurity] STEP 4: Binding slskd section to Options...
[20:56:39 INF] [AddSlskdnSecurity] STEP 4a: boundOptions.Security is null: False
[20:56:39 INF] [AddSlskdnSecurity] STEP 4b: boundOptions.Security.Enabled = True, Profile = Standard
[20:56:39 INF] [AddSlskdnSecurity] STEP 5: Getting SecurityOptions from section...
[20:56:39 INF] [AddSlskdnSecurity] STEP 5a: sectionToUse.Get result: Enabled = True, Profile = Standard
[20:56:39 INF] [AddSlskdnSecurity] STEP 6: Final options selected - Enabled = True, Profile = Standard (source: boundOptions.Security)
[20:56:39 INF] [DI] AddSlskdnSecurity completed
[20:56:39 INF] [MAIN] Services configured, building DI container...
[20:56:39 INF] Building DI container...
[20:56:39 INF] [DI] About to call builder.Build() - this will construct all singleton services...
[20:56:39 INF] [ConfigProbe] slskd:web:port=32987 slskd:slskd:web:port=null using=32987
[20:56:39 INF] [Kestrel] Configuring HTTP listener at http://0.0.0.0:32987/ (from config: True)
[20:56:39 INF] [Kestrel] HTTP listener configured
[20:56:39 INF] DI container built successfully!
[20:56:39 INF] Databases are up to date!
[20:56:39 INF] [DI] Forcing construction of ScriptService, WebhookService, and TrafficObserverIntegrationService...
[20:56:39 INF] Set default script executable to '/bin/bash'
[20:56:39 INF] [DI] ScriptService, WebhookService, and TrafficObserverIntegrationService constructed
[20:56:39 INF] [DI] About to configure ASP.NET pipeline...
[20:56:39 INF] [Pipeline] Starting ConfigureAspDotNetPipeline...
[20:56:39 INF] [Pipeline] About to call UseSlskdnSecurity (FIRST in pipeline)...
[20:56:39 INF] [UseSlskdnSecurity] STEP 1: Checking configuration sections...
[20:56:39 INF] [UseSlskdnSecurity] STEP 1a: slskd:security.Exists() = True, enabled = True
[20:56:39 INF] [UseSlskdnSecurity] STEP 1b: Security.Exists() = False, enabled = N/A
[20:56:39 INF] [UseSlskdnSecurity] STEP 1c: security.Exists() = False, enabled = N/A
[20:56:39 INF] [UseSlskdnSecurity] STEP 2: Using slskd:security section
[20:56:39 INF] [UseSlskdnSecurity] STEP 3: Getting SecurityOptions from section...
[20:56:39 INF] [UseSlskdnSecurity] STEP 3a: sectionToUse.Get result: Enabled = True, Profile = Standard
[20:56:39 INF] [UseSlskdnSecurity] Security is enabled (Enabled=True), REGISTERING middleware
[20:56:39 INF] [UseSlskdnSecurity] Options: Enabled=True, Profile=Standard
[20:56:39 INF] [UseSlskdnSecurity] About to call UseSecurityMiddleware...
[20:56:39 INF] [UseSlskdnSecurity] Security middleware registered successfully
[20:56:39 INF] [Pipeline] UseSlskdnSecurity completed
[20:56:39 INF] Using base url /
[20:56:39 INF] Publishing Swagger documentation to /swagger
[20:56:39 INF] Serving static content from /home/keith/Documents/code/slskdn/src/slskd/bin/Debug/net8.0/wwwroot
[20:56:39 INF] [SPA] Registered fallback to index.html for client-side routing (after file server)
[20:56:39 INF] [DI] ASP.NET pipeline configured
[20:56:39 INF] Configuration complete.  Starting application...
[20:56:39 INF] [DI] Constructing ApplicationHostedServiceWrapper hosted service...
[20:56:39 INF] [DI] About to resolve IApplication from DI...
[20:56:39 INF] [DI] Factory function called to construct Application singleton...
[20:56:39 INF] [DI] Resolving OptionsAtStartup...
[20:56:39 INF] [DI] Resolving IOptionsMonitor<Options>...
[20:56:39 INF] [DI] Resolving IManagedState<State>...
[20:56:39 INF] [DI] Resolving ISoulseekClient...
[20:56:39 INF] [DI] Resolving FileService...
[20:56:39 INF] [DI] Resolving ConnectionWatchdog...
[20:56:39 INF] [DI] Resolving ITransferService...
[20:56:39 INF] [DI] Constructing TransferService...
[20:56:39 INF] [DI] Constructing UploadService...
[20:56:39 INF] [DI] Resolving FileService for UploadService...
[20:56:39 INF] [DI] Resolving IUserService for UploadService...
[20:56:39 INF] Blacklist disabled
[20:56:39 INF] [DI] Resolving ISoulseekClient for UploadService...
[20:56:39 INF] [DI] Resolving IOptionsMonitor<Options> for UploadService...
[20:56:39 INF] [DI] Resolving IShareService for UploadService...
[20:56:39 INF] [DI] Constructing ShareService...
[20:56:39 INF] [DI] Resolving FileService for ShareService...
[20:56:39 INF] [DI] Resolving IShareRepositoryFactory for ShareService...
[20:56:39 INF] [DI] Resolving IOptionsMonitor<Options> for ShareService...
[20:56:39 INF] [DI] Resolving IModerationProvider for ShareService...
[20:56:39 INF] [DI] Resolving IShareScanner for ShareService (optional)...
[20:56:39 INF] [DI] Resolving IContentPeerHintService for ShareService (optional)...
[20:56:39 INF] [DI] Constructing ContentPeerHintService...
[20:56:39 INF] [DI] Constructing ContentPeerPublisher...
[20:56:39 INF] [DI] Resolving ILogger<ContentPeerPublisher>...
[20:56:39 INF] [DI] Resolving IMeshDhtClient for ContentPeerPublisher...
[20:56:39 INF] [DI] Constructing MeshDhtClient...
[20:56:39 INF] [DI] Resolving ILogger<MeshDhtClient>...
[20:56:39 INF] [DI] Resolving IDhtClient for MeshDhtClient...
[20:56:39 INF] [DI] Constructing InMemoryDhtClient...
[20:56:39 INF] [DI] Resolving ILogger<InMemoryDhtClient>...
[20:56:39 INF] [DI] Resolving IOptions<MeshOptions> for InMemoryDhtClient...
[20:56:39 INF] [DI] Resolving MeshStatsCollector for InMemoryDhtClient (optional)...
[20:56:39 INF] [DI] Constructing MeshStatsCollector...
[20:56:39 INF] [MeshStatsCollector] Constructor called
[20:56:39 INF] [MeshStatsCollector] Creating lazy service resolvers...
[20:56:39 INF] [MeshStatsCollector] Constructor completed
[20:56:39 INF] [DI] MeshStatsCollector constructed
[20:56:39 INF] [DI] All InMemoryDhtClient dependencies resolved, creating instance...
[20:56:39 INF] [InMemoryDhtClient] Constructor called
[20:56:39 INF] [InMemoryDhtClient] Generating random node ID...
[20:56:39 INF] [InMemoryDhtClient] Creating KademliaRoutingTable...
[20:56:39 INF] [InMemoryDhtClient] KademliaRoutingTable created
[20:56:39 INF] [InMemoryDhtClient] Constructor completed
[20:56:39 INF] [DI] InMemoryDhtClient constructed
[20:56:39 INF] [DI] All MeshDhtClient dependencies resolved, creating instance (DhtService will be resolved lazily to break circular dependency)...
[20:56:39 INF] [DI] MeshDhtClient constructed
[20:56:39 INF] [DI] Resolving IOptions<MeshOptions> for ContentPeerPublisher...
[20:56:39 INF] [DI] All ContentPeerPublisher dependencies resolved, creating instance...
[20:56:39 INF] [DI] ContentPeerPublisher constructed
[20:56:39 INF] [ContentPeerHintService] Constructor called
[20:56:39 INF] [ContentPeerHintService] Constructor completed
[20:56:39 INF] [DI] ContentPeerHintService constructed
[20:56:39 INF] [DI] All ShareService dependencies resolved, creating instance...
[20:56:39 INF] [DI] ShareService constructed
[20:56:39 INF] [DI] Resolving IRelayService for UploadService...
[20:56:39 INF] [DI] Resolving IDbContextFactory<TransfersDbContext> for UploadService...
[20:56:39 INF] [DI] Resolving EventBus for UploadService...
[20:56:39 INF] [DI] Resolving IScheduledRateLimitService for UploadService (optional)...
[20:56:39 INF] [DI] All UploadService dependencies resolved, creating instance...
[20:56:39 INF] [UploadService] Constructor called
[20:56:39 INF] [UploadService] Creating UploadGovernor...
[20:56:39 INF] [UploadService] Creating UploadQueue...
[20:56:39 INF] [UploadService] Constructor completed
[20:56:39 INF] [DI] UploadService constructed
[20:56:39 INF] [DI] Constructing DownloadService...
[20:56:39 INF] [HashDb] Current schema version: 0, target: 17
[20:56:39 INF] [HashDb] Applying migration 1: Initial schema
[20:56:39 INF] [HashDb] Migration 1 applied successfully
[20:56:39 INF] [HashDb] Applying migration 2: Extended schema for multi-source and probing
[20:56:39 INF] [HashDb] Migration 2 applied successfully
[20:56:39 INF] [HashDb] Applying migration 3: MusicBrainz Album Targets
[20:56:39 INF] [HashDb] Migration 3 applied successfully
[20:56:39 INF] [HashDb] Applying migration 4: Canonical scoring variant metadata
[20:56:39 INF] [HashDb] Migration 4 applied successfully
[20:56:39 INF] [HashDb] Applying migration 5: Canonical stats table
[20:56:39 INF] [HashDb] Migration 5 applied successfully
[20:56:39 INF] [HashDb] Applying migration 6: Library Health tables
[20:56:39 INF] [HashDb] Migration 6 applied successfully
[20:56:39 INF] [HashDb] Applying migration 7: Codec-specific fingerprints and analyzer version
[20:56:39 INF] [HashDb] Migration 7 applied successfully
[20:56:39 INF] [HashDb] Applying migration 8: Artist release graph cache
[20:56:39 INF] [HashDb] Migration 8 applied successfully
[20:56:39 INF] [HashDb] Applying migration 9: Discography job cache
[20:56:39 INF] [HashDb] Migration 9 applied successfully
[20:56:39 INF] [HashDb] Applying migration 10: Database optimization indexes
[20:56:39 INF] [HashDb] Migration 10 applied successfully
[20:56:39 INF] [HashDb] Applying migration 12: Label crate job cache
[20:56:39 INF] [HashDb] Migration 12 applied successfully
[20:56:39 INF] [HashDb] Applying migration 13: Peer metrics storage
[20:56:39 INF] [HashDb] Migration 13 applied successfully
[20:56:39 INF] [HashDb] Applying migration 14: Warm cache popularity
[20:56:39 INF] [HashDb] Migration 14 applied successfully
[20:56:39 INF] [HashDb] Applying migration 15: Warm cache entries
[20:56:39 INF] [HashDb] Migration 15 applied successfully
[20:56:39 INF] [HashDb] Applying migration 16: Virtual Soulfind pseudonyms
[20:56:39 INF] [HashDb] Migration 16 applied successfully
[20:56:39 INF] [HashDb] Applying migration 17: Traffic accounting
[20:56:39 INF] [HashDb] Migration 17 applied successfully
[20:56:39 INF] [HashDb] Applied 16 migrations
[20:56:39 INF] [HashDb] Initialized at /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/hashdb.db, current seq_id: 0
[20:56:39 INF] [HashDb] Subscribed to download, search, and peer interaction events for hash discovery
[20:56:39 INF] [DI] DownloadService constructed
[20:56:39 INF] [DI] TransferService constructed
[20:56:39 INF] [DI] Resolving IBrowseTracker...
[20:56:39 INF] [DI] Resolving IRoomService...
[20:56:39 INF] [DI] Resolving IUserService...
[20:56:39 INF] [DI] Resolving IMessagingService...
[20:56:39 INF] [DI] Constructing ConversationService...
[20:56:39 INF] [DI] Resolving ISoulseekClient for ConversationService...
[20:56:39 INF] [DI] Resolving EventBus for ConversationService...
[20:56:39 INF] [DI] Resolving IDbContextFactory<MessagingDbContext> for ConversationService...
[20:56:39 INF] [DI] Resolving IPodService for ConversationService...
[20:56:39 INF] [DI] Constructing SqlitePodService...
[20:56:39 INF] [DI] Resolving IDbContextFactory<PodDbContext> for SqlitePodService...
[20:56:39 INF] [DI] Resolving IPodPublisher for SqlitePodService (optional)...
[20:56:39 INF] [DI] Constructing PodPublisher...
[20:56:39 INF] [DI] Resolving IMeshDhtClient for PodPublisher...
[20:56:39 INF] [DI] Resolving IServiceScopeFactory for PodPublisher...
[20:56:39 INF] [DI] Resolving ILogger<PodPublisher> for PodPublisher...
[20:56:39 INF] [DI] All PodPublisher dependencies resolved, creating instance...
[20:56:39 INF] [DI] PodPublisher constructed
[20:56:39 INF] [DI] Resolving IPodMembershipSigner for SqlitePodService (optional)...
[20:56:39 INF] [Overlay] Rotated keypair at mesh-overlay.key
[20:56:39 INF] [DI] Resolving ILogger<SqlitePodService> for SqlitePodService...
[20:56:39 INF] [DI] Resolving IServiceScopeFactory for SqlitePodService (for lazy IContentLinkService resolution)...
[20:56:39 INF] [DI] All SqlitePodService dependencies resolved, creating instance (IContentLinkService will be resolved lazily via scope)...
[20:56:39 INF] [DI] SqlitePodService constructed
[20:56:39 INF] [DI] All ConversationService dependencies resolved, creating instance...
[20:56:39 INF] [DI] ConversationService constructed
[20:56:39 INF] [DI] Resolving IShareService...
[20:56:39 INF] [DI] Resolving ISearchService...
[20:56:39 INF] [DI] Resolving INotificationService...
[20:56:39 INF] [DI] Resolving IRelayService...
[20:56:39 INF] [DI] Resolving IHubContext<ApplicationHub>...
[20:56:39 INF] [DI] Resolving IHubContext<LogsHub>...
[20:56:39 INF] [DI] Resolving IHubContext<TransfersHub>...
[20:56:39 INF] [DI] Resolving EventBus...
[20:56:39 INF] [DI] Resolving ShareGrantAnnouncementService (best-effort)...
[20:56:39 INF] [DI] All dependencies resolved, constructing Application...
[20:56:39 INF] [Application] Constructor called
[20:56:39 INF] [Application] Setting up event handlers...
[20:56:39 INF] [Application] Registering clock events...
[20:56:39 INF] [Application] Constructor completed
[20:56:39 INF] [DI] Application singleton constructed successfully
[20:56:39 INF] [DI] IApplication resolved successfully
[20:56:39 INF] [DI] About to create ApplicationHostedServiceWrapper instance...
[20:56:39 INF] [ApplicationHostedServiceWrapper] Constructor called - Application already resolved
[20:56:39 INF] [ApplicationHostedServiceWrapper] Constructor completed
[20:56:39 INF] [DI] ApplicationHostedServiceWrapper constructed
[20:56:39 INF] [DI] Constructing PodPublisherBackgroundService hosted service...
[20:56:39 INF] [DI] PodPublisherBackgroundService constructed
[20:56:39 INF] [DI] Resolving MeshBootstrapService hosted service...
[20:56:39 INF] [DI] Constructing PeerDescriptorPublisher...
[20:56:39 INF] [DI] PeerDescriptorPublisher constructed
[20:56:39 INF] [MeshBootstrapService] Constructor called
[20:56:39 INF] [MeshBootstrapService] Constructor completed
[20:56:39 INF] [DI] MeshBootstrapService hosted service resolved
[20:56:39 INF] [DI] Resolving PeerDescriptorRefreshService hosted service...
[20:56:39 INF] [PeerDescriptorRefreshService] Constructor called
[20:56:39 INF] [PeerDescriptorRefreshService] Getting current endpoints...
[20:56:39 INF] [PeerDescriptorRefreshService] Got 2 endpoints
[20:56:39 INF] [PeerDescriptorRefreshService] Constructor completed
[20:56:39 INF] [DI] PeerDescriptorRefreshService hosted service resolved
[20:56:39 INF] [DI] Constructing CircuitMaintenanceService hosted service...
[20:56:39 INF] Initialized 1 transports: Tor
[20:56:39 INF] [CircuitMaintenanceService] Constructor called
[20:56:39 INF] [CircuitMaintenanceService] Constructor completed
[20:56:39 INF] [DI] CircuitMaintenanceService constructed
[20:56:39 INF] [DI] Constructing UdpOverlayServer hosted service...
[20:56:39 INF] PrivacyLayer initialized with options: Enabled=False
[20:56:39 INF] [UdpOverlayServer] Constructor called
[20:56:39 INF] [UdpOverlayServer] Constructor completed
[20:56:39 INF] [DI] UdpOverlayServer constructed
[20:56:39 INF] [DI] Constructing QuicOverlayServer hosted service...
[20:56:39 INF] [QuicOverlayServer] Constructor called
[20:56:39 INF] [QuicOverlayServer] Constructor completed
[20:56:39 INF] [DI] QuicOverlayServer constructed
[20:56:39 INF] [DI] Constructing QuicDataServer hosted service...
[20:56:39 INF] [QuicDataServer] Constructor called
[20:56:39 INF] [QuicDataServer] Constructor completed
[20:56:39 INF] [DI] QuicDataServer constructed
[20:56:39 INF] [DI] Constructing ContentPublisherService hosted service...
[20:56:39 INF] [DI] ContentPublisherService constructed
[20:56:39 INF] [DI] Resolving DhtRendezvousService hosted service...
[20:56:39 INF] [DI] DhtRendezvousService hosted service resolved
[20:56:39 INF] Auto-replace state file not found, defaulting to enabled
[20:56:39 INF] [Program] About to call app.Run()...
[20:56:39 INF] [Program] app.Run() will start the web server and all hosted services...
[20:56:39 INF] [Program] Calling app.Run() - this will block until shutdown...
[20:56:39 INF] [Program] If you see this but not 'Host started and bound', the web server is hanging
[20:56:39 INF] [ApplicationHostedServiceWrapper] StartAsync called - about to call Application.StartAsync
[20:56:39 INF] [Application] StartAsync called - beginning startup sequence
[20:56:39 INF] Application started
[20:56:39 INF] [ApplicationHostedServiceWrapper] Application.StartAsync returned (non-blocking)
[20:56:39 INF] [VSF-PUBLISH] Shadow index publishing disabled
[20:56:39 INF] [VSF-HEALTH] Health monitoring started
[20:56:39 INF] [PodPublisher] Starting background refresh service (interval: 30 minutes)
[20:56:39 INF] [MultiRealmHostedService] Initializing multi-realm service with 1 realms
[20:56:39 INF] [MeshBootstrapService] ExecuteAsync called
[20:56:39 INF] [MeshBootstrap] Starting service (refresh interval: 30 minutes, bootstrap nodes: 0)
[20:56:39 INF] [MeshBootstrap] Publishing self descriptor to DHT
[20:56:39 INF] [PeerDescriptorRefreshService] ExecuteAsync called
[20:56:39 INF] [MeshDHT] Starting peer descriptor refresh service
[20:56:39 INF] [MultiRealm] Initializing 1 realms with bridging disabled
[20:56:39 INF] [ContentPeerHintService] ExecuteAsync called
[20:56:39 INF] [MultiRealm] Initialized realm 'default-realm-v1' with 1 governance roots
[20:56:39 INF] [MultiRealm] Successfully initialized 1 realms
[20:56:39 INF] [MultiRealmHostedService] Multi-realm initialization complete.
[20:56:39 INF] [CircuitMaintenanceService] ExecuteAsync called
[20:56:39 INF] Circuit maintenance service started
[20:56:39 INF] [UdpOverlayServer] ExecuteAsync called
[20:56:39 INF] [QuicOverlayServer] ExecuteAsync called
[20:56:39 INF] [QuicDataServer] ExecuteAsync called
[20:56:39 INF] Starting DHT rendezvous service with MonoTorrent DHT
[20:56:39 INF] [MediaCore] Published descriptors batch count=0
[20:56:39 INF] Waiting for DHT initialization to complete...
[20:56:39 INF] Circuit maintenance: 0 circuits, 0 total peers, 0 active, 0 onion-capable
[20:56:39 INF] [RESCUE] Underperformance detector started
[20:56:39 INF] [BACKFILL] Background service started (interval: 600s, max concurrent: 2)
[20:56:39 WRN] [Overlay] UDP overlay port 50400 is already in use. Continuing without UDP overlay server. Mesh will operate in degraded mode: DHT, relay, and hole punching will still function, but direct inbound UDP connections will be unavailable.
[20:56:39 INF] Wishlist background service started
[20:56:39 INF] Auto-replace background service started (enabled: True)
[20:56:39 WRN] [Overlay-QUIC] QUIC overlay port 50400 is already in use. Continuing without QUIC overlay server. Mesh will operate in degraded mode: DHT, relay, and hole punching will still function, but direct inbound QUIC connections will be unavailable.
[20:56:39 INF] [Overlay-QUIC-DATA] Listening on port 50401
[20:56:39 INF] [Program] ✓ ApplicationStarted event fired - all hosted services have completed StartAsync
[20:56:39 INF] DHT state changed to: Initialising, nodes: 0
[20:56:39 INF] ✓ Host started and bound to: http://0.0.0.0:32987
[20:56:39 INF] DHT engine started on port 6953, state: Initialising
[20:56:39 INF] [ProfileService] Generated new Ed25519 keypair
[20:56:39 INF] This client is not beacon-capable (behind NAT), will connect to beacons
[20:56:39 INF] DHT rendezvous service initialization complete
[20:56:39 INF] [MdnsAdvertiser] Started advertising nodeA._slskdn._tcp.local on kspld0.local:32987
[20:56:39 INF] [LanDiscovery] Started advertising as nodeA (SSDX4-YKN7-BC7Q-TIU) on port 32987
[20:56:39 INF] [MeshDHT] No configured endpoints, detected 4 network interfaces
[20:56:39 INF] [MeshDHT] No configured endpoints, detected 4 network interfaces
[20:56:39 INF] Options reconfigured successfully
[20:56:39 INF] Listening for incoming connections on 0.0.0.0:43597
[20:56:39 INF] Skipping version check for Development build
[20:56:39 INF] Initializing shares
[20:56:39 WRN] Performing a forced re-scan of shares
[20:56:40 INF] Share scan started
[20:56:40 INF] Adding isBlocked, isQuarantined, and moderationReason columns to files table (migration)
[20:56:40 WRN] Shared file cache missing or invalid. Re-creating prior to scan.
[20:56:40 INF] Shared file cache re-created and ready for scan.
[20:56:40 INF] Starting shared file scan
[20:56:40 INF] Sharing /home/keith/Documents/code/slskdn/test-data/slskdn-test-fixtures/movie as movie
[20:56:40 INF] Sharing /home/keith/Documents/code/slskdn/test-data/slskdn-test-fixtures/book as book
[20:56:40 INF] Enumerating shared directories
[20:56:40 INF] Found 2 shared directories (and 0 were excluded) in 1ms.  Starting file scan.
[20:56:40 INF] Scan found 0 files (and 0 were filtered) in 5ms
[20:56:40 INF] [MeshDHT] Published self descriptor peer:mesh:self seq=1 endpoints=4 transports=4 privacy=disabled
[20:56:40 INF] [MeshDHT] Published self descriptor peer:mesh:self seq=1 endpoints=4 transports=4 privacy=disabled
[20:56:40 INF] Removed or renamed 0 files and 0 directories in 0ms
[20:56:40 INF] Rebuilding filename index...
[20:56:40 INF] Filename index rebuild complete
[20:56:40 INF] Shares scanned successfully. Found 2 directories and 0 files in 42.5895ms
[20:56:40 INF] Scanned 50% of shared directories. Found 1 files so far.
[20:56:40 INF] Share cache loaded from disk successfully. Sharing 0 directories and 2 files
[20:56:40 INF] Warming browse response cache...
[20:56:40 INF] Browse response cached successfully in 6ms
[20:56:40 INF] Scanned 100% of shared directories. Found 2 files so far.
[20:56:40 INF] Warming browse response cache...
[20:56:40 INF] Starting system clock...
[20:56:40 INF] Browse response cached successfully in 0ms
[20:56:40 INF] System clock started
[20:56:40 WRN] Not connecting to the Soulseek server; 'no-connect' option is enabled
[20:56:40 INF] [Application] Initialization complete
[20:56:40 INF] DHT state changed to: Ready, nodes: 32
[20:56:40 INF] Waiting for DHT to bootstrap...
[20:56:40 INF] DHT bootstrapped successfully with 41 nodes
[20:56:40 INF] Running DHT peer discovery (get_peers) - DHT state: Ready, nodes: 41
[20:56:40 INF] Querying DHT for rendezvous infohash 1: MonoTorrent.InfoHash
[20:56:40 INF] Querying DHT for rendezvous infohash 2: MonoTorrent.InfoHash
[20:56:40 INF] Querying DHT for rendezvous infohash 3: MonoTorrent.InfoHash
[20:56:41 WRN] [VSF-HEALTH] Soulseek health changed: Healthy → Unavailable
[20:56:45 INF] DHT discovery found 9 new peers (total: 9)
[20:56:47 WRN] Warning: Entropy below optimal level. Entropy: 7.187 bits/byte (warning: 7.5)
[20:56:47 WRN] [MeshHealth] Routing table is empty or unhealthy
[20:56:47 WRN] [MeshHealth] No peer connectivity detected
[20:56:48 INF] Request did not specify an API version
[20:56:49 INF] [Discovery] Database initialized at /home/keith/Documents/code/slskdn/test-artifacts/e2e/A-32987/discovery/discovery.db
[20:56:50 INF] [SPA Fallback Middleware] Serving index.html for /contacts (file server returned 404)
[20:56:58 INF] [HolePunch] Completed in 16798.8049ms - FAILED (Local: 0.0.0.0:47419)
[20:56:58 INF] Generated new overlay certificate, expires 01/27/2027 20:56:58
[20:56:58 INF] [HolePunch] Completed in 17007.4587ms - FAILED (Local: 0.0.0.0:59518)
[20:56:58 INF] [HolePunch] Completed in 17007.5078ms - FAILED (Local: 0.0.0.0:36019)
[20:56:58 INF] [HolePunch] Completed in 17007.6222ms - FAILED (Local: 0.0.0.0:44686)
[20:56:58 INF] [HolePunch] Completed in 17007.7476ms - FAILED (Local: 0.0.0.0:53918)
[20:56:58 INF] [HolePunch] Completed in 17007.719ms - FAILED (Local: 0.0.0.0:54222)
[20:56:58 INF] [HolePunch] Completed in 16837.2644ms - FAILED (Local: 0.0.0.0:40646)
[20:56:58 INF] [HolePunch] Completed in 16800.1209ms - FAILED (Local: 0.0.0.0:34195)
[20:56:58 INF] [HolePunch] Completed in 16800.4483ms - FAILED (Local: 0.0.0.0:44121)
[20:57:05 WRN] [MeshHealth] Routing table is empty or unhealthy
[20:57:05 WRN] [MeshHealth] No peer connectivity detected
[20:57:07 INF] Request did not specify an API version
[20:57:07 WRN] [MeshHealth] Routing table is empty or unhealthy
[20:57:07 WRN] [MeshHealth] No peer connectivity detected
[20:57:09 INF] Request did not specify an API version
[20:57:09 INF] [SPA Fallback Middleware] Serving index.html for /collections (file server returned 404)
[20:57:12 INF] Library items search: query=sintel, kinds=null, limit=5
[20:57:12 INF] Library items search: query=sha256:2e93caf3f954e8e8457d9846ad7756f74ccf192dab77b7247d48ba134a8e2c1b, kinds=null, limit=20
[20:57:14 INF] Library items search: query=treasure, kinds=null, limit=5
[20:57:14 INF] Library items search: query=sha256:2e93caf3f954e8e8457d9846ad7756f74ccf192dab77b7247d48ba134a8e2c1b, kinds=null, limit=20
[20:57:15 WRN] [ShareGrantAnnounce] Failed to send SHAREGRANT 806221bd-1940-4d68-a1e6-9fa35fea5e8f to nodeB
System.InvalidOperationException: The server connection must be connected and logged in to send a private message (currently: Disconnected)
   at Soulseek.SoulseekClient.SendPrivateMessageAsync(String username, String message, Nullable`1 cancellationToken)
   at slskd.Sharing.API.SharesController.AnnounceShareGrantAsync(ShareGrant created, String ownerUserId, CancellationToken ct) in /home/keith/Documents/code/slskdn/src/slskd/Sharing/API/SharesController.cs:line 257
[20:57:15 WRN] [ShareGrantAnnounce] Failed to send SHAREGRANT 806221bd-1940-4d68-a1e6-9fa35fea5e8f to nodeC
System.InvalidOperationException: The server connection must be connected and logged in to send a private message (currently: Disconnected)
   at Soulseek.SoulseekClient.SendPrivateMessageAsync(String username, String message, Nullable`1 cancellationToken)
   at slskd.Sharing.API.SharesController.AnnounceShareGrantAsync(ShareGrant created, String ownerUserId, CancellationToken ct) in /home/keith/Documents/code/slskdn/src/slskd/Sharing/API/SharesController.cs:line 257
[20:57:20 FTL] Received SIGTERM
[20:57:20 FTL] [FATAL] ProcessExit event fired - process terminating
